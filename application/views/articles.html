<!DOCTYPE html>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/Other/html.html to edit this template
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    </head>
    <body>
        <ul>
            <?php foreach($list_elements as $list_element): ?> 
            <?php echo $list_element; ?>
            <?php endforeach; ?>
        </ul>     
        <button onclick="window.location.href = window.location.href + '/view';">New article</button>        
    </body>
</html>

<script>
    function getClickedButtonValue(clicked_button_object) {
        clicked_button_value = clicked_button_object.value;
        return clicked_button_value;
    }
    
    function deleteArticle(clicked_button_object) {
        clicked_button_value = getClickedButtonValue(clicked_button_object);
        
        let confirm_text = "Do you really want to remove article #" + clicked_button_value + "?";
        if(confirm(confirm_text)) {
            var articles_url = window.location.href;
            var remove_article_url = articles_url + "/remove/" + clicked_button_value;
            
            /* don't use Ajax when you have to redirect a webpage, it won't work!
            var xhttp = new XMLHttpRequest();
            xhttp.open("GET", remove_article_url, false);
            xhttp.send(); //send a http request */

            window.location.href = remove_article_url; // redirect to the url contained in remove_article_url
            // at this point the client will be redirected to the '/article' page by the "reroute" function present in the 
            // controller class
        }
    }

    function updateArticle(clicked_button_object) {
        clicked_button_value = getClickedButtonValue(clicked_button_object);
        
        var articles_url = window.location.href;
        var edit_article_url = articles_url + "/view?id=" + clicked_button_value;
        
        window.location.href = edit_article_url; // redirect to the url contained in edit_article_url
    }
</script>
